{% extends "base.html" %}

{% block title %}Model Training - Profiler Agentic Automation{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1><i class="fas fa-database"></i> Model Training Dashboard</h1>
        <p>Manage your knowledge base and vector database</p>
    </div>

    <div class="training-grid">
        <!-- Document Ingestion -->
        <div class="action-card">
            <div class="card-header">
                <i class="fas fa-file-upload"></i>
                <h3>Document Ingestion</h3>
            </div>
            <p>Upload and ingest documentation files (PDF, TXT, MD, JSON) into the vector database.</p>
            <a href="{{ url_for('ingest_docs_page') }}" class="btn btn-primary">
                <i class="fas fa-upload"></i> Upload Documents
            </a>
        </div>

        <!-- Framework Ingestion -->
        <div class="action-card">
            <div class="card-header">
                <i class="fas fa-code"></i>
                <h3>Framework Ingestion</h3>
            </div>
            <p>Ingest Python test framework code to help AI learn your coding patterns.</p>
            <a href="{{ url_for('ingest_framework_page') }}" class="btn btn-primary">
                <i class="fas fa-code-branch"></i> Ingest Framework
            </a>
        </div>

        <!-- View Documents -->
        <div class="action-card">
            <div class="card-header">
                <i class="fas fa-list"></i>
                <h3>View Documents</h3>
            </div>
            <p>Browse all ingested documents, view metadata, and manage your knowledge base.</p>
            <a href="{{ url_for('view_documents') }}" class="btn btn-primary">
                <i class="fas fa-eye"></i> View Documents
            </a>
        </div>

        <!-- Test RAG Retrieval -->
        <div class="action-card">
            <div class="card-header">
                <i class="fas fa-search"></i>
                <h3>Test RAG Retrieval</h3>
            </div>
            <p>Test different retrieval strategies (Semantic, Hybrid, Keyword, Context) and validate chunking.</p>
            <a href="{{ url_for('test_retrieval_page') }}" class="btn btn-primary">
                <i class="fas fa-vial"></i> Test Retrieval
            </a>
        </div>

        <!-- Vector DB Status -->
        <div class="action-card">
            <div class="card-header">
                <i class="fas fa-chart-line"></i>
                <h3>Database Status</h3>
            </div>
            <p>View vector database statistics, index size, and system configuration.</p>
            <a href="{{ url_for('vector_db_status') }}" class="btn btn-primary">
                <i class="fas fa-info-circle"></i> View Status
            </a>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
        <h2>Quick Statistics</h2>
        <div class="stats-row">
            <div class="stat-box">
                <i class="fas fa-file-alt"></i>
                <div>
                    <h4 id="total-docs">Loading...</h4>
                    <p>Total Documents</p>
                </div>
            </div>
            <div class="stat-box">
                <i class="fas fa-cube"></i>
                <div>
                    <h4 id="total-chunks">Loading...</h4>
                    <p>Total Chunks</p>
                </div>
            </div>
            <div class="stat-box">
                <i class="fas fa-database"></i>
                <div>
                    <h4 id="index-size">Loading...</h4>
                    <p>Index Size</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Load stats
document.addEventListener('DOMContentLoaded', function() {
    fetch('/training/status')
        .then(response => response.text())
        .then(html => {
            // Parse stats from status page if needed
            console.log('Stats loaded');
        })
        .catch(error => console.error('Error loading stats:', error));
});
</script>
{% endblock %}
